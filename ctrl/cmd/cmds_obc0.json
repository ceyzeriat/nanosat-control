[{"number": 1, "param": [["message", "message", "32_127", "str", "2", "ASCII"]], "desc": "Picsat receives a message (2 chars) and replies with the same message", "name": "echo", "subsystem": "obc", "pid": "l0commanager", "lparam": 2},
{"number": 2, "param": [["loadL1Source", "loadL1Source", "1_3", "uint8", "1", ""], ["param", "a Gericos parameter of l1AppDefine() named `param`, usage: a complete mystery", "*", "uint32", "1", ""]], "desc": "Manually load the l1 level", "name": "loadL1", "subsystem": "obc", "pid": "l0commanager", "lparam": 5},
{"number": 3, "param": [["part", "part of the L0 HK to get (part1 or part2)", "1_2", "uint8", "1", ""]], "desc": "Triggers transmission of all l0 HK", "name": "getL0Hk", "subsystem": "all_l0", "pid": "l0housekeeper", "lparam": 1},
{"number": 4, "param": [], "desc": "gets the RTC date (unix time in seconds)", "name": "getRtc", "subsystem": "obc", "pid": "l0commanager", "lparam": 0},
{"number": 5, "param": [["posixTime", "posix time (unix), in secs since 1 Jan 1970", "1261440000_1890000000", "uint32", "1", "seconds"]], "desc": "Sets the RTC date (unix time in seconds) and resets the cpuTickCount to prevent bugs on timeTag values", "name": "setRtc", "subsystem": "obc", "pid": "l0commanager", "lparam": 4},
{"number": 6, "param": [["funErrMin", "maximum function err code for search", "", "int16", "1", ""], ["funErrMax", "minimum function err code for search", "", "int16", "1", ""], ["fileCrc", "file CRC code for search. Use fileCrc = 0xFF to accept all files", "", "uint32", "1", ""]], "desc": "count the number of fram log entries (using the sdram log copy), with funErrCode between funErrMin and funErrMax included, and with fileCrcCode = fileCrc", "name": "countFramLogEntries", "subsystem": "obc", "pid": "l0commanager", "lparam": 8},
{"number": 10, "param": [["address", "I2C address", "*", "int32", "1", ""], ["busDataSize", "", "*", "uint16", "1", ""], ["busData", "", "*", "uint8", "*", ""]], "desc": "", "name": "i2cWrite", "subsystem": "obc", "pid": "l0commanager", "lparam": "*"},
{"number": 11, "param": [["address", "I2C address", "*", "int32", "1", ""], ["writeDataSize", "1;(TCPACKET_MAX_DATA_SIZE-6)", "*", "uint16", "*", ""], ["readDataSize", "", "*", "uint16", "*", ""], ["writeReadDelay", "", "*", "uint32", "1", "number_of_ticks"], ["writeData", "The size", "*", "uint8", "*", ""]], "desc": "Use I2C to forward a commad to a subsystem, directly on the I2C address, then reads I2C after a delay and emits the reply in a telemetry", "name": "i2cWriteRead", "subsystem": "obc", "pid": "l0commanager", "lparam": "*"},
{"number": 12, "param": [], "desc": "Soft reboot OBC", "name": "softRebootObc", "subsystem": "obc", "pid": "l0commanager", "lparam": 0},
{"number": 13, "param": [], "desc": "Hard reboot OBC", "name": "hardRebootObc", "subsystem": "obc", "pid": "l0commanager", "lparam": 0},
{"number": 14, "param": [], "desc": "Soft reboot EPS", "name": "softRebootEps", "subsystem": "eps", "pid": "l0epsmanager", "lparam": 0},
{"number": 15, "param": [], "desc": "Hard reboot EPS", "name": "hardRebootEps", "subsystem": "eps", "pid": "l0epsmanager", "lparam": 0},
{"number": 16, "param": [], "desc": "Kicks the Eps dedicated watchdog (P>1h, 1 kick on each pass recommanded)", "name": "kickEpsDedicatedWatchdog", "subsystem": "eps", "pid": "l0epsmanager", "lparam": 0},
{"number": 17, "param": [["nEntries", "number of entries to emit", "1_100", "uint16", "1", ""]], "desc": "emits the last nEntries logEntries in the fram log", "name": "emitLastFramLogEntries", "subsystem": "obc", "pid": "l0commanager", "lparam": 2},
{"number": 18, "param": [["nEntries", "number of event to re-emit", "1_100", "uint16", "1", ""]], "desc": "re-emits the last nEntries events preivously reported", "name": "emitLastEventReports", "subsystem": "obc", "pid": "l0commanager", "lparam": 2},
{"number": 19, "param": [["errorCodeOffset", "test error code offset", "0_255", "uint8", "1", ""]], "desc": "emits an test event report frame with the error code (EC_baseTestErrorCode = 1000)+errorCodeOffset", "name": "emitTestEventReport", "subsystem": "obc", "pid": "l0commanager", "lparam": 1},
{"number": 20, "param": [["errorCodeOffset", "test error code offset", "0_255", "uint8", "1", ""]], "desc": "adds a test entry into the fram log with the error code (EC_baseTestErrorCode = 1000)+errorCodeOffset", "name": "logFramLogTestEntry", "subsystem": "obc", "pid": "l0commanager", "lparam": 1},
{"number": 21, "param": [["testUint8", "testUint8", "*", "uint8", "1", ""], ["testInt8", "testInt8", "*", "int8", "1", ""], ["testUint16", "testUint16", "*", "uint16", "1", ""], ["testInt16", "testInt16", "*", "int16", "1", ""], ["testUint32", "testUint32", "*", "uint32", "1", ""], ["testInt32", "testInt32", "*", "int32", "1", ""], ["testUint64", "testUint64", "*", "uint64", "1", ""], ["testInt64", "testInt64", "*", "int64", "1", ""]], "desc": "for all available different numerical types, onboard printf of the param values.Return as data the values of each param (endianess conversions check)", "name": "paramDataValueCheck", "subsystem": "obc", "pid": "l0commanager", "lparam": 30},
{"number": 23, "param": [], "desc": "Forced deployment of ants systems (override deploy ISIS function), of all antennas", "name": "forceAntsDeploy", "subsystem": "ants", "pid": "l0commanager", "lparam": 0},
{"number": 24, "param": [], "desc": "initialize the sd cards file system. Also takes care of the physical powering/initialization of the sd cards (init step 1)", "name": "sdCardsForceFileSystemInit", "subsystem": "s_card", "pid": "l0sdcardmanager", "lparam": 0},
{"number": 25, "param": [], "desc": "initialize the sd cards file system if not already initialized. Also takes care of the physical powering/initialization of the sd cards (init step 1)", "name": "sdCardsFileSystemInit", "subsystem": "sd_card", "pid": "l0sdcardmanager", "lparam": 0},
{"number": 26, "param": [["sdCardSelect", "sd card select (0 or 1)", "0_1", "uint8", "1", ""]], "desc": "initialize the file system on the selected sd card (init step 2)", "name": "sdCardInitVolume", "subsystem": "sd_card", "pid": "l0sdcardmanager", "lparam": 1},
{"number": 27, "param": [["sdCardSelect", "sd card select (0 or 1)", "0_1", "uint8", "1", ""]], "desc": "format the selected partition in the active sd card (defined at the sdCardInitVolume step)", "name": "sdCardFormat", "subsystem": "sd_card", "pid": "l0sdcardmanager", "lparam": 1},
{"number": 28, "param": [["sdCardSelect", "sd card select (0 or 1)", "0_1", "uint8", "1", ""]], "desc": "file test on the selected sd card: creates / writes / reads / deletes a test file", "name": "sdCardFileTest", "subsystem": "sd_card", "pid": "l0sdcardmanager", "lparam": 1},
{"number": 30, "param": [], "desc": "resends the last 3 execution acknowledges", "name": "getLast3AckExec", "subsystem": "obc", "pid": "l0commanager", "lparam": 0},
{"number": 31, "param": [["index", "index of flag", "*", "uint8", "1", ""], ["flagScope", "flagScope (0: fram, 1: fram+sdram, 2: sdram)", "0_2", "uint8", "1", ""], ["flagValue", "flag value", "*", "uint8", "1", ""]], "desc": "sets the value of the uint8 fram flag identified by index", "name": "setUint8L0Flag", "subsystem": "obc", "pid": "l0memorymanager", "lparam": 3},
{"number": 32, "param": [["index", "index of flag", "*", "uint8", "1", ""], ["flagScope", "flagScope (0: fram, 2: sdram)", "0_2", "uint8", "1", ""]], "desc": "returns the value of the uint8 fram flag identified by index", "name": "getUint8L0Flag", "subsystem": "obc", "pid": "l0memorymanager", "lparam": 2},
{"number": 33, "param": [], "desc": "sets the FRAM flag area to 0xFF, this also sets all the flag values to their default values", "name": "resetAllFramFlags", "subsystem": "obc", "pid": "l0memorymanager", "lparam": 0},
{"number": 34, "param": [], "desc": "clears fram log entirely, all values are set of 0xFF (~30 sec exec time)", "name": "clearFramLog", "subsystem": "obc", "pid": "l0memorymanager", "lparam": 0},
{"number": 35, "param": [], "desc": "clears fram log counter values, all values are set of 0xFF (~3 sec exec time). Fram log should be considered empty aftre this command.", "name": "clearFramLogCounters", "subsystem": "obc", "pid": "l0memorymanager", "lparam": 0},
{"number": 40, "param": [], "desc": "Stop the execution of all dumps running in background", "name": "abortAllDumps", "subsystem": "obc", "pid": "l0memorymanager", "lparam": 0},
{"number": 41, "param": [["start_address", "", "0_0x100000", "uint32", "1", ""], ["bytes_number", "", "0_0x100000", "uint32", "1", ""]], "desc": "Triggers transmission of the norflash content between start_address and start_address+bytes_number to ground for verification (for patching)Return telemetry: data dumped", "name": "StartDumpNORFLASHRange", "subsystem": "obc", "pid": "l0memorymanager", "lparam": 8},
{"number": 42, "param": [["start_address", "", "0_0x3FFFF", "uint32", "1", ""], ["bytes_number", "", "0_0x3FFFF", "uint32", "1", ""]], "desc": "Triggers transmission of the FRAM content between start_address and start_address+bytes_numberReturn telemetry: data dumped", "name": "StartDumpFRAM", "subsystem": "obc", "pid": "l0memorymanager", "lparam": 8},
{"number": 43, "param": [["start_address", "", "0_0xFFFFFFFF", "uint32", "1", ""], ["bytes_number", "", "0_0xFFFFFFFF", "uint32", "1", ""]], "desc": "Triggers transmission of the SDRAM content between start_address and start_address+bytes_number to ground for verification. Can be used to check any variable value or buffer value with it's address from map.txtReturn telemetry: data dumped", "name": "StartDumpAnySDRAMRange", "subsystem": "obc", "pid": "l0memorymanager", "lparam": 8},
{"number": 44, "param": [["start_address", "", "0_0x400000", "uint32", "1", ""], ["bytes_number", "", "0_0x400000", "uint32", "1", ""]], "desc": "Triggers transmission of the SDCard Primary L1 image content between start_address and start_address+bytes_numberto ground for verification (for patching)Return telemetry: data dumped", "name": "StartDumpSDCardL1PriRange", "subsystem": "obc", "pid": "l0memorymanager", "lparam": 8},
{"number": 45, "param": [["start_address", "", "0_0x400000", "uint32", "1", ""], ["bytes_number", "", "0_0x400000", "uint32", "1", ""]], "desc": "Triggers transmission of the SDCard Secondary L1 image content between start_address and start_address+bytes_numberto ground for verification (for patching)Return telemetry: data dumped", "name": "StartDumpSDCardL1SecRange", "subsystem": "obc", "pid": "l0memorymanager", "lparam": 8},
{"number": 46, "param": [["start_address", "", "0_0xFFFFFFFF", "uint32", "1", ""], ["bytes_number", "", "*", "uint32", "1", ""], ["data", "", "*", "uint8", "*", ""]], "desc": "Write the SDRAM content on any adress between start_address and start_address+bytes_number.Can be used to modify any variable value or buffer value with it's adress from map.txt", "name": "writeAnySDRAMRange", "subsystem": "obc", "pid": "l0memorymanager", "lparam": "*"},
{"number": 47, "param": [["start_address", "", "0_0x3FFFF", "uint32", "1", ""], ["bytes_number", "", "*", "uint32", "1", ""], ["data", "", "*", "uint8", "*", ""]], "desc": "Write the FRAM content between start_address and start_address+bytes_numberWith a maximum data size of 212 bytes in a frame, the worst execution time will be around 300 ms", "name": "writeFRAMRange", "subsystem": "obc", "pid": "l0memorymanager", "lparam": "*"},
{"number": 48, "param": [["TargetAdress", "", "0_0x100000", "uint32", "1", ""], ["DataSize", "", "0_0x100000", "uint32", "1", ""]], "desc": "Compute the CRC32 on norflash content between start_address and start_address+bytes_number to ground for verification (for patching)Returns Telemetry: CRC32", "name": "computeCRC32OnNORFLASHRange", "subsystem": "obc", "pid": "l0memorymanager", "lparam": 8},
{"number": 49, "param": [["TargetAdress", "", "0_0xFFFFFFFF", "uint32", "1", ""], ["DataSize", "", "0_0xFFFFFFFF", "uint32", "1", ""]], "desc": "Compute the CRC32 on any SDRAM adress between start_address and start_address+bytes_number to ground for verification (example: Check that a class is properly loaded)Returns Telemetry: CRC32", "name": "computeCRC32OnAnySDRAMRange", "subsystem": "obc", "pid": "l0memorymanager", "lparam": 8},
{"number": 50, "param": [["TargetAdress", "TargetAddress of L1 image on SDCard; 0 Start at &l1AppDefine", "0_0x100000", "uint32", "1", ""], ["DataSize", "", "0_0x100000", "uint32", "1", ""]], "desc": "Compute the CRC32 on SDCard Primary L1 image content between start_address and start_address+bytes_number to ground for verification (for patching)Returns Telemetry: CRC32", "name": "computeCRC32OnL1SDPriRange", "subsystem": "obc", "pid": "l0memorymanager", "lparam": 8},
{"number": 51, "param": [["TargetAdress", "TargetAddress of L1 image on SDCard; 0 Start at &l1AppDefine", "0_0x100000", "uint32", "1", ""], ["DataSize", "", "0_0x100000", "uint32", "1", ""]], "desc": "Compute the CRC32 on SDCard Secondary L1 image content between start_address and start_address+bytes_numberto ground for verification (for patching)Returns Telemetry: CRC32", "name": "computeCRC32OnL1SDSecRange", "subsystem": "obc", "pid": "l0memorymanager", "lparam": 8},
{"number": 52, "param": [["L1Source", "L1 Image starts from &l1AppDefine to SDCARDMAXL1FILESIZE , unused space above L1 padded with ZEROSNORFLASH = 0x01,SDCARD_PRI = 0x02,SDCARD_SEC = 0x03,", "1_3", "uint8", "1", ""]], "desc": "Compute the CRC32 on WHOLE L1 image for selected L1 source.This is used by ground segment for verification (check correct application of patch, and also check \"version\" of L1 currently loaded on satellite)Returns Telemetry: CRC32", "name": "computeCurrentL1CRC32", "subsystem": "obc", "pid": "l0memorymanager", "lparam": 1},
{"number": 55, "param": [["L1Source", "L1 Image starts from &l1AppDefine to SDCARDMAXL1FILESIZE , unused space above L1 padded with ZEROS.NORFLASH = 0x01,SDCARD_PRI = 0x02,SDCARD_SEC = 0x03,", "1_3", "uint8", "1", ""]], "desc": "Get the expected CRC32 value of L1 for selected L1 source.This value is checked before allowing to load L1 on boot.This value is stored in FRAM.Returns Telemetry: CRC32", "name": "getFramExpectedL1CRC32", "subsystem": "obc", "pid": "l0memorymanager", "lparam": 1},
{"number": 56, "param": [["L1Source", "L1 Image starts from &l1AppDefine to SDCARDMAXL1FILESIZE , unused space above L1 padded with ZEROS.NORFLASH = 0x01,SDCARD_PRI = 0x02,SDCARD_SEC = 0x03,", "1_3", "uint8", "1", ""], ["ExpectedCRC32", "", "0_0xFFFFFFFF", "uint32", "1", ""]], "desc": "Set the expected CRC32 of L1 for selected L1 source.This value is checked before allowing to load L1 on boot.This value is stored in FRAM.", "name": "setFramExpectedL1CRC32", "subsystem": "obc", "pid": "l0memorymanager", "lparam": 5},
{"number": 61, "param": [["NbOfSegments", "Total number of segments in the patch", "0_1024", "uint16", "1", ""]], "desc": "Initialize a L1 patch session and set the number of memory segments contained in the patch. The maximum allowed number of segments is 1024This function shall be called first before patching any memory segment", "name": "startPatch", "subsystem": "obc", "pid": "l0memorymanager", "lparam": 2},
{"number": 62, "param": [["patchId", "total size=8+n", "0_1024", "uint16", "1", ""], ["targetAdress", "Adress to be patched. Reference: 0=first byte of.bin file.Only adresses of L1 area are allowed to be patched.So the allowed patch adress range is: &l1AppDefine in .bin file until&l1AppDefine in .bin file + SDCARDMAXL1FILESIZE(1024*1024)", "0x0007FFFF_0x00180000", "uint32", "1", ""], ["dataSize", "", "*", "uint16", "1", ""], ["data", "Data (in*)", "*", "uint8", "*", ""]], "desc": "Send a memory segment to patch L1 between start_address and start_address+bytes_numberNote: This function only stores the memory segment in a SDRAM buffer when pushed. The effective writing in norflash will be performed by the command: WritePatchToNORFlashThe maximum size of data in Segment is 230 bytes", "name": "pushMemSegment", "subsystem": "obc", "pid": "l0memorymanager", "lparam": "*"},
{"number": 63, "param": [], "desc": "Get the status of patch sessionReturn telemetry", "name": "getPatchState", "subsystem": "obc", "pid": "l0memorymanager", "lparam": 0},
{"number": 64, "param": [], "desc": "Get the list of segments ID currently received by the satelliteReturn telemetry", "name": "getListIdReceivedSegments", "subsystem": "obc", "pid": "l0memorymanager", "lparam": 0},
{"number": 65, "param": [], "desc": "Get the list of segments ID missing to perform the patch.Return telemetry", "name": "getListIdMissingSegments", "subsystem": "obc", "pid": "l0memorymanager", "lparam": 0},
{"number": 66, "param": [["L1Source", "NORFLASH = 0x01,SDCARD_PRI = 0x02,SDCARD_SEC = 0x03,", "1_3", "uint8", "1", ""], ["expectedCRC32AllDatas", "", "0_0xFFFFFFFF", "uint32", "1", ""]], "desc": "This function perform the writing of L1 image on source passed as parameter of the previously uploaded memory segmentsRun condition: If all segments are received and CRC32 on datas valid", "name": "validateAndWritePatch", "subsystem": "obc", "pid": "l0memorymanager", "lparam": 5},
{"number": 69, "param": [], "desc": "Copy L1 image from NORFlash to SdCardPri image file", "name": "copyNorFlashToSdCardPri", "subsystem": "obc", "pid": "l0memorymanager", "lparam": 0},
{"number": 70, "param": [], "desc": "Copy L1 image from NORFlash to SdCardSec image file", "name": "copyNorFlashToSdCardSec", "subsystem": "obc", "pid": "l0memorymanager", "lparam": 0},
{"number": 71, "param": [], "desc": "Copy L1 image from SdCardPri to SdCardSec image file", "name": "copySdCardPriToSec", "subsystem": "obc", "pid": "l0memorymanager", "lparam": 0},
{"number": 72, "param": [], "desc": "Copy L1 image from SdCardSec to SdCardPri image file", "name": "copySdCardSecToPri", "subsystem": "obc", "pid": "l0memorymanager", "lparam": 0},
{"number": 80, "param": [["switchVal", "on (true) / off (false) boolean", "0_1", "uint8", "1", ""]], "desc": "on/off switch for the ADCS 5V power line (gomeps_channel_0)", "name": "adcsPowerSwitch", "subsystem": "adcs", "pid": "l0adcsmanager", "lparam": 1},
{"number": 81, "param": [["writeDataSize", "allowed values 1;(TCPACKET_MAX_DATA_SIZE-2)", "", "uint8", "1", ""], ["readDataSize", "allowed values 1;(TMPACKET_MAX_DATA_SIZE)", "", "uint8", "1", ""], ["writeData", "uint8[writeDataSize]", "", "uint8", "*", ""]], "desc": "sends a command containing \"writeData\" to the adcs via I2C, returns a TM with the reply from the ADCS on the I2C (readData)", "name": "sendAdcsCmd", "subsystem": "adcs", "pid": "l0adcsmanager", "lparam": "*"},
{"number": 82, "param": [], "desc": "", "name": "getAdcsMode", "subsystem": "adcs", "pid": "l0adcsmanager", "lparam": 0},
{"number": 83, "param": [["duration", "duration. Value 0xFFFFFFFF triggers permanent detumbling", "", "uint8", "1", "seconds"]], "desc": "puts the adcs into detumbling mode", "name": "adcsStartDetumble", "subsystem": "adcs", "pid": "l0adcsmanager", "lparam": 4},
{"number": 84, "param": [], "desc": "stops the detumbling", "name": "adcsStopDetumble", "subsystem": "adcs", "pid": "l0adcsmanager", "lparam": 0}]